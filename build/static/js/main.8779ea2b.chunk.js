(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{200:function(e,t,c){},202:function(e,t,c){},228:function(e,t){},231:function(e,t,c){},391:function(e,t,c){},392:function(e,t,c){},393:function(e,t,c){},396:function(e,t,c){"use strict";c.r(t);var s,n,a=c(0),r=c.n(a),i=c(181),o=c.n(i),l=(c(200),c(19)),j=c.n(l),u=c(32),d=c(5),b=(c(202),c(31)),O=c(7),m=Object(a.createContext)(null),h=c(75),x=c(74),p=c.n(x),f=(c(231),c(1)),v=function(e){var t=e.message,c=t.name,s=t.user_id,n=t.text,a=!1;return s===e.current_uid&&(a=!0),a?Object(f.jsx)("div",{className:"row right-align",children:Object(f.jsx)("div",{className:"col s12 m8 16 right",children:Object(f.jsxs)("p",{className:"sentbyme",children:[" ",c,": ",n]})})}):Object(f.jsx)("div",{className:"row left-align",children:Object(f.jsx)("div",{className:"col s12 m8 16 left",children:Object(f.jsxs)("p",{className:"opponent",children:[" ",c,": ",n]})})})},g=c(195),N=(c(391),function(e){var t=e.messages,c=e.user_id;return Object(f.jsx)(g.a,{className:"messages",children:t.map((function(e,t){return Object(f.jsx)(v,{message:e,current_uid:c},e._id)}))})}),S=(c(392),function(e){var t=e.message,c=e.setMessage,s=e.sendMessage;return Object(f.jsxs)("form",{action:"",onSubmit:s,className:"form",children:[Object(f.jsx)("input",{type:"text",className:"input",placeholder:"Type a message",value:t,onChange:function(e){return c(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?s(e):null}}),Object(f.jsx)("button",{className:"sendButton",children:"Send Message"})]})}),_=(c(393),function(){var e="ting-chat-app-backend.vercel.app"+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000"}).REACT_APP_PORT,t=Object(a.useContext)(m),c=t.user,n=(t.setUser,Object(O.g)()),r=n.room_id,i=(n.room_name,Object(a.useState)("")),o=Object(d.a)(i,2),l=o[0],j=o[1],u=Object(a.useState)([]),b=Object(d.a)(u,2),x=b[0],v=b[1];Object(a.useEffect)((function(){(s=p()(e)).emit("join",{name:c.name,room_id:r,user_id:c._id})}),[]),Object(a.useEffect)((function(){s.on("message",(function(e){v([].concat(Object(h.a)(x),[e]))}))}),[x]),Object(a.useEffect)((function(){s.emit("get-messages-history",r),s.on("output-messages",(function(e){v(e)}))}),[]);return Object(f.jsx)("div",{className:"outerContainer",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(N,{messages:x,user_id:c._id}),Object(f.jsx)(S,{message:l,setMessage:j,sendMessage:function(e){e.preventDefault(),l&&(console.log(l),s.emit("sendMessage",l,r,(function(){return j("")})))}})]})})}),w=function(e){var t=e.name;return Object(f.jsx)("div",{className:"card horizontal",children:Object(f.jsx)("div",{className:"card-stacked",children:Object(f.jsx)("div",{className:"card-content",children:Object(f.jsx)("p",{children:t})})})})},C=function(e){var t=e.rooms;return Object(f.jsx)("div",{children:t&&t.map((function(e){return Object(f.jsx)(b.b,{to:"/chat/"+e._id+"/"+e.name,children:Object(f.jsx)(w,{name:e.name})},e._id)}))})},E=function(){var e=Object(a.useContext)(m),t=e.user,c=(e.setUser,Object(a.useState)("")),s=Object(d.a)(c,2),r=s[0],i=s[1],o=Object(a.useState)([]),l=Object(d.a)(o,2),j=l[0],u=l[1],b="ting-chat-app-backend.vercel.app:"+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000"}).REACT_APP_PORT;Object(a.useEffect)((function(){return n=p()(b),function(){n.emit("disconnect"),n.off()}}),[b]),Object(a.useEffect)((function(){n.on("output-rooms",(function(e){u(e)}))}),[]),Object(a.useEffect)((function(){n.on("room-created",(function(e){u([].concat(Object(h.a)(j),[e]))}))}),[j]),Object(a.useEffect)((function(){console.log(j)}),[j]);return t?Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col s12 m6",children:Object(f.jsxs)("div",{className:"card blue-grey darken-1",children:[Object(f.jsxs)("div",{className:"card-content white-text",children:[Object(f.jsxs)("span",{className:"card-title",children:["Welcome ",t?t.name:""]}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n.emit("create-room",r),console.log(r),i("")},children:[Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{placeholder:"Enter a room name",id:"room",type:"text",className:"validate",value:r,onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("label",{htmlFor:"room",children:"Room"})]})}),Object(f.jsx)("button",{className:"btn",children:"Create Room"})]})]}),Object(f.jsx)("div",{className:"card-action"})]})}),Object(f.jsx)("div",{className:"col s6 m5 offset-1",children:Object(f.jsx)(C,{rooms:j})})]})}):Object(f.jsx)(O.a,{to:"/login"})},T=function(e){var t=e.logout;return Object(f.jsx)("li",{onClick:t,children:Object(f.jsx)("a",{href:"/login",children:"Logout"})})},y=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"/login",children:"Login"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"/signup",children:"Signup"})})]})},P=function(){var e=Object(a.useContext)(m),t=e.user,c=e.setUser,s=function(){var e=Object(u.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/logout",{credentials:"include"});case 3:t=e.sent,s=t.json(),console.log("logout data",s),c(null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=t?Object(f.jsx)(T,{logout:s}):Object(f.jsx)(y,{});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("nav",{className:"green",children:Object(f.jsxs)("div",{className:"nav-wrapper",children:[Object(f.jsx)("a",{href:"/",className:"brand-logo",children:"Chat"}),Object(f.jsx)("a",{href:"#","data-target":"mobile-demo",className:"sidenav-trigger",children:Object(f.jsx)("i",{className:"material-icons",children:"menu"})}),Object(f.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:n})]})}),Object(f.jsx)("ul",{className:"sidenav",id:"mobile-demo",children:n})]})},R=function(){var e=Object(a.useContext)(m),t=e.user,c=e.setUser,s=Object(a.useState)(""),n=Object(d.a)(s,2),r=n[0],i=(n[1],Object(a.useState)("")),o=Object(d.a)(i,2),l=o[0],b=o[1],h=Object(a.useState)(""),x=Object(d.a)(h,2),p=x[0],v=x[1],g=Object(a.useState)(""),N=Object(d.a)(g,2),S=(N[0],N[1]),_=Object(a.useState)(""),w=Object(d.a)(_,2),C=w[0],E=w[1],T=Object(a.useState)(""),y=Object(d.a)(T,2),P=y[0],R=y[1],k=function(){var e=Object(u.a)(j.a.mark((function e(t){var s,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),E(""),S(""),R(""),console.log(r,l,p),e.prev=5,e.next=8,fetch("http://localhost:5000/login",{method:"POST",credentials:"include",body:JSON.stringify({name:r,email:l,password:p}),headers:{"Content-Type":"application/json"}});case 8:return s=e.sent,e.next=11,s.json();case 11:n=e.sent,console.log(n),n.errors&&(E(n.errors.email),S(n.errors.name),R(n.errors.password)),n.user&&c(n.user),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(f.jsx)(O.a,{to:"/"}):Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("h2",{children:"Login"}),Object(f.jsxs)("form",{className:"col s12",onSubmit:k,children:[Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"email",type:"email",className:"validate",value:l,onChange:function(e){return b(e.target.value)}}),Object(f.jsx)("div",{className:"email error red-text",children:C}),Object(f.jsx)("label",{htmlFor:"email",children:"Email"})]})}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"password",type:"password",className:"validate",value:p,onChange:function(e){return v(e.target.value)}}),Object(f.jsx)("div",{className:"password error red-text",children:P}),Object(f.jsx)("label",{htmlFor:"password",children:"Password"})]})}),Object(f.jsx)("button",{className:"btn",children:"Login"})]})]})},k=function(){var e=Object(a.useContext)(m),t=e.user,c=e.setUser,s=Object(a.useState)(""),n=Object(d.a)(s,2),r=n[0],i=n[1],o=Object(a.useState)(""),l=Object(d.a)(o,2),b=l[0],h=l[1],x=Object(a.useState)(""),p=Object(d.a)(x,2),v=p[0],g=p[1],N=Object(a.useState)(""),S=Object(d.a)(N,2),_=S[0],w=S[1],C=Object(a.useState)(""),E=Object(d.a)(C,2),T=E[0],y=E[1],P=Object(a.useState)(""),R=Object(d.a)(P,2),k=R[0],F=R[1],A=function(){var e=Object(u.a)(j.a.mark((function e(t){var s,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(""),w(""),F(""),console.log(r,b,v),e.prev=5,e.next=8,fetch("http://localhost:5000/signup",{method:"POST",credentials:"include",body:JSON.stringify({name:r,email:b,password:v}),headers:{"Content-Type":"application/json"}});case 8:return s=e.sent,e.next=11,s.json();case 11:n=e.sent,console.log(n),n.errors&&(y(n.errors.email),w(n.errors.name),F(n.errors.password)),n.user&&c(n.user),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(f.jsx)(O.a,{to:"/"}):Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("h2",{children:"Sign up"}),Object(f.jsxs)("form",{className:"col s12",onSubmit:A,children:[Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"name",type:"text",className:"validate",value:r,onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("div",{className:"name error red-text",children:_}),Object(f.jsx)("label",{htmlFor:"name",children:"Name"})]})}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"email",type:"email",className:"validate",value:b,onChange:function(e){return h(e.target.value)}}),Object(f.jsx)("div",{className:"email error red-text",children:T}),Object(f.jsx)("label",{htmlFor:"email",children:"Email"})]})}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"password",type:"password",className:"validate",value:v,onChange:function(e){return g(e.target.value)}}),Object(f.jsx)("div",{className:"password error red-text",children:k}),Object(f.jsx)("label",{htmlFor:"password",children:"Password"})]})}),Object(f.jsx)("button",{className:"btn",children:"Sign up"})]})]})};var F=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),c=t[0],s=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(u.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/verifyuser",{credentials:"include",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,s(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(f.jsx)(b.a,{children:Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(m.Provider,{value:{user:c,setUser:s},children:[Object(f.jsx)(P,{}),Object(f.jsxs)(O.d,{children:[Object(f.jsx)(O.b,{exact:!0,path:"/",component:E}),Object(f.jsx)(O.b,{path:"/chat/:room_id/:room_name",component:_}),Object(f.jsx)(O.b,{path:"/signup",component:k}),Object(f.jsx)(O.b,{path:"/login",component:R})]})]})})})},A=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,397)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),s(e),n(e),a(e),r(e)}))};o.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(F,{})}),document.getElementById("root")),A()}},[[396,1,2]]]);
//# sourceMappingURL=main.8779ea2b.chunk.js.map